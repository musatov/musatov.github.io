"use strict";const options={itemSelector:".grid-item",percentPosition:!0,gutter:".gutter-sizer",columnWidth:".grid-sizer"},pckry=new Packery(".grid__wrapper",options);window.addEventListener("load",(()=>{let e;function t(){return!!("ontouchstart"in window)}document.querySelector("body").classList.remove("loading"),document.querySelectorAll('a[href^="#"]:not(.popup-link)').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=this.getAttribute("href").substring(1);const s=document.getElementById(t).getBoundingClientRect().top-0;window.scrollBy({top:s-130,behavior:"smooth"})}))})),t()||pckry.getItemElements().forEach((function(t){e=new Draggabilly(t),pckry.bindDraggabillyEvents(e)}));const s=e=>new Promise(((t,s)=>setTimeout(t,e)));let o;try{const e=document.querySelector(".home__text");o=window.innerWidth>=1e3?3e3:1200,s(500).then((()=>{try{e.classList.remove("second-active"),e.classList.remove("third-active")}catch(e){}return s(o)})).then((()=>{try{e.classList.remove("third-active"),e.classList.add("second-active")}catch(e){}return s(o)})).then((()=>{try{e.classList.remove("second-active"),e.classList.add("third-active")}catch(e){}return s(o)})),setInterval((()=>{s(500).then((()=>{try{e.classList.remove("second-active"),e.classList.remove("third-active")}catch(e){}return s(o)})).then((()=>{try{e.classList.remove("third-active"),e.classList.add("second-active")}catch(e){}return s(o)})).then((()=>{try{e.classList.remove("second-active"),e.classList.add("third-active")}catch(e){}return s(o)}))}),3*o)}catch(e){}if(t()){let e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?setTimeout((()=>{e.target.classList.add("start-animation")}),2500):e.target.classList.remove("start-animation")}))}));document.querySelectorAll(".grid-item-team").forEach((t=>{e.observe(t)}))}if(t()){gsap.timeline({scrollTrigger:{trigger:"body",start:"0",scrub:!0,onEnter:()=>{ScrollTrigger.batch(".grid-item:not(.grid-item-team)",{interval:.1,batchMax:1,onEnter:e=>{e[0].classList.contains("we-write-books")?n():(e[0].classList.add("start-animation"),setTimeout((()=>{e[0].classList.remove("start-animation")}),+e[0].dataset.delaymob))},onEnterBack:e=>{e[0].classList.contains("we-write-books")?n():(e[0].classList.add("start-animation"),setTimeout((()=>{e[0].classList.remove("start-animation")}),+e[0].dataset.delaymob))},start:"top center",end:"top 100px"})},pin:!1}})}document.querySelectorAll(".home-video-play").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let s=e.closest(".home-video");const o=s.querySelector("video");s.classList.toggle("home-video_play"),o.paused?o.play():o.pause(),o.addEventListener("ended",(()=>{s.classList.remove("home-video_play")})),o.addEventListener("pause",(()=>{s.classList.remove("home-video_play")})),document.addEventListener("scroll",(()=>{o.getBoundingClientRect().y<-100&&o.pause()}))}))}));const i=document.querySelectorAll(".header__team-item");function a(e){this.classList.contains("header__team-item_active")&&!e.target.closest(".header-team-popup__wrap")?this.classList.remove("header__team-item_active"):(i.forEach((e=>{e.classList.remove("header__team-item_active")})),this.classList.add("header__team-item_active"))}i.forEach((e=>{e.addEventListener("click",a)}));let r=!1,c=document.querySelector(".we-write-books");function n(e){let t=document.querySelector(".we-write-books");t.classList.contains("start-animation")&&r?(t.classList.remove("start-animation"),setTimeout((()=>{t.classList.add("start-animation")}),100),r=!1):t.classList.add("start-animation"),document.querySelector(".line_1").addEventListener("animationend",(function(e){r=!0}))}try{c.addEventListener("mouseover",n)}catch(e){}if(!t()){const e=document.querySelectorAll(".grid-item:not(.we-write-books)");document.querySelectorAll(".grid-item");e.forEach((e=>{e.addEventListener("mouseover",(()=>{e.classList.add("start-animation"),setTimeout((()=>{e.classList.remove("start-animation")}),e.dataset.delay||1e3)}))}))}const l=document.querySelectorAll(".popup-link"),d=document.querySelectorAll(".popup-block"),m=document.querySelectorAll(".popup-block__overlay"),u=document.querySelectorAll(".popup-block__close");function v(){document.querySelector("body").classList.remove("body_popup-open"),d.forEach((e=>{e.classList.remove("popup-open")}))}l.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),document.querySelector("body").classList.add("body_popup-open"),document.querySelector(e.getAttribute("href")).classList.add("popup-open")}))})),m.forEach((e=>{e.addEventListener("click",v)})),u.forEach((e=>{e.addEventListener("click",v)}))}));
